(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(16),i=n(10),r=n(11),l=n(14),o=n(12),u=n(15),s=n(0),c=n.n(s),m=n(13),d=n.n(m),f=n(2),h=n.n(f),p="api/persons",v={getAll:function(){return h.a.get(p)},create:function(e){return h.a.post(p,e)},remove:function(e){var t=p+"/"+e.toString();return h.a.delete(t)},update:function(e){var t=p+"/"+e.id.toString();return h.a.put(t,e)}},b=(n(41),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).handleNameAdd=function(e){n.setState({newName:e.target.value})},n.handleNumberAdd=function(e){n.setState({newNumber:e.target.value})},n.handleFilter=function(e){n.setState({filter:e.target.value.toLowerCase()})},n.addName=function(e){e.preventDefault();var t=n.state.persons.find(function(e){return e.name===n.state.newName});if(t){var i=Object(a.a)({},t,{number:n.state.newNumber}),r=i.name+" on jo luettelossa, korvataanko vanha numero uudella?";window.confirm(r)&&v.update(i).then(function(){return v.getAll()}).then(function(e){n.setState({persons:e.data,notification:"p\xe4ivitettiin ".concat(n.state.newName),newName:"",newNumber:""}),setTimeout(function(){n.setState({notification:null})},3e3)}).catch(function(e){console.log(e.message),alert("henkil\xf6n '".concat(i.name,"' tiedot on jo poistettu palvelimelta")),n.setState({persons:n.state.persons.filter(function(e){return e.id!==i.id})})})}else{var l={name:n.state.newName,number:n.state.newNumber};v.create(l).then(function(e){console.log("Person added: ",e),n.setState({persons:n.state.persons.concat(e.data),notification:"lis\xe4ttiin ".concat(l.name),newName:"",newNumber:""}),setTimeout(function(){n.setState({notification:null})},3e3)}).catch(function(e){n.setState({notification:"Tietoja puuttuu, anna sek\xe4 nimi ett\xe4 numero"}),setTimeout(function(){n.setState({notification:null})},3e3)})}},n.deleteName=function(e){return function(){var t="poistetaanko "+e.name+"?";window.confirm(t)&&v.remove(e.id).then(function(){return v.getAll()}).then(function(t){n.setState({persons:t.data,notification:"poistettiin ".concat(e.name)}),setTimeout(function(){n.setState({notification:null})},3e3)})}},n.state={persons:[],newName:"",newNumber:"",filter:"",notification:null},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),v.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t.data})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Puhelinluettelo"),c.a.createElement(S,{message:this.state.notification}),c.a.createElement(w,{filter:this.state.filter,handleFilter:this.handleFilter}),c.a.createElement("h2",null,"Lis\xe4\xe4 uusi / muuta olemassaolevaa numeroa"),c.a.createElement(N,{state:this.state,namehandler:this.handleNameAdd,numberhandler:this.handleNumberAdd,submit:this.addName}),c.a.createElement("h2",null,"Numerot"),c.a.createElement(g,{persons:this.state.persons,filter:this.state.filter,deletehandler:this.deleteName}))}}]),t}(c.a.Component)),E=function(e){var t=e.person,n=e.deletehandler;return c.a.createElement("tr",null,c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.number),c.a.createElement("td",null,c.a.createElement("button",{onClick:n},"poista")))},w=function(e){var t=e.filter,n=e.handleFilter;return c.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",c.a.createElement("input",{value:t,onChange:n}))},N=function(e){var t=e.state,n=e.namehandler,a=e.numberhandler,i=e.submit;return c.a.createElement("form",{onSubmit:i},c.a.createElement("div",null,"nimi: ",c.a.createElement("input",{value:t.newName,onChange:n})),c.a.createElement("div",null,"numero: ",c.a.createElement("input",{value:t.newNumber,onChange:a})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},g=function(e){var t=e.persons,n=e.filter,a=e.deletehandler;return c.a.createElement("table",null,c.a.createElement("tbody",null,t.filter(function(e){return e.name.toLowerCase().includes(n)}).map(function(e){return c.a.createElement(E,{key:e.name,person:e,deletehandler:a(e)})})))},S=function(e){var t=e.message;return null===t?null:c.a.createElement("div",{className:"notification"},t)};d.a.render(c.a.createElement(b,null),document.getElementById("root"));t.default=b}},[[17,2,1]]]);
//# sourceMappingURL=main.146a611b.chunk.js.map